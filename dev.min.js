const openPlayerBtn=document.querySelector("#openPlayer"),playerModal=document.querySelector("#playerModal"),closeButton=document.querySelector("#closeButton"),songTitle=document.querySelector("#songTitle"),songComposer=document.querySelector("#songComposer"),songPerformer=document.querySelector("#songPerformer"),prevButton=document.querySelector("#prevButton"),playButton=document.querySelector("#playButton"),nextButton=document.querySelector("#nextButton"),volumeSlider=document.querySelector("#volumeSlider"),sourceButton=document.querySelector("#sourceButton"),skipBackwardButton=document.querySelector("#skipBackwardButton"),skipForwardButton=document.querySelector("#skipForwardButton"),wikiBtn=document.querySelectorAll(".wikiBtn"),mainBox=document.querySelector(".mainBox"),countdownTitle=document.querySelector(".countdownTitle"),countdownDateTitle=document.querySelector(".countdownDateTitle"),progressBar=document.querySelector("#song-progress-bar"),progress=document.querySelector("#song-progress"),progressController=document.querySelector("#song-progress-controller"),timer=document.querySelector("#song-timer"),section=document.querySelector(".section");var countDownDate=new Date("Apr 30, 2023 00:00:00").getTime(),nextCountDownDate=new Date("Sep 2, 2023 00:00:00").getTime(),x=setInterval((function(){var e=(new Date).getTime(),n=countDownDate-e,t=Math.floor(n/864e5),o=Math.floor(n%864e5/36e5),r=Math.floor(n%36e5/6e4),a=Math.floor(n%6e4/1e3);if(document.getElementById("day").innerHTML=t,document.getElementById("hour").innerHTML=o,document.getElementById("minute").innerHTML=r,document.getElementById("second").innerHTML=a,countDownDate===new Date("Apr 30, 2023 00:00:00").getTime()?(wikiBtn.forEach((e=>e.href="https://vi.wikipedia.org/wiki/Sự_kiện_30_tháng_4_năm_1975")),countdownTitle.innerHTML="THỐNG NHẤT ĐẤT NƯỚC",countdownDateTitle.innerHTML="30/4",mainBox.style.background="linear-gradient(to bottom, #ee1010ee 0%, #ee1010e8 50%, #0083fdec 50%, #0083fde8 100%)"):countDownDate===new Date("Sep 2, 2023 00:00:00").getTime()&&(wikiBtn.forEach((e=>e.href="https://vi.wikipedia.org/wiki/Ngày_Quốc_khánh_(Việt_Nam)")),countdownTitle.innerHTML="QUỐC KHÁNH VIỆT NAM",countdownDateTitle.innerHTML="2/9",mainBox.style.backgroundImage="linear-gradient(175deg,#ee1010d5 0%, #cc0606 100%)"),section.style.display="block",n<0){countDownDate=nextCountDownDate;var l=new Date(countDownDate);nextCountDownDate=3===l.getMonth()&&30===l.getDate()?new Date(l.getFullYear(),8,2).getTime():new Date(l.getFullYear()+1,3,30).getTime()}}),1e3);let currentSongIndex=0,songs=[{title:"Vui Mở Đường",composer:"Đỗ Nhuận",performer:"NSƯT Hữu Nội - Hợp ca nam nữ Đài TNVN",src:"/soundtrack/vuimoduong.mp3",nguon:"https://bcdcnt.net/bai-hat/vui-mo-duong-731.html",thongtinthem:""},{title:"Đất Nước Trọn Niềm Vui",composer:"Hoàng Hà",performer:"NSƯT Hữu Nội",src:"/soundtrack/datnuoctronniemvui.mp3",nguon:"https://bcdcnt.net/bai-hat/dat-nuoc-tron-niem-vui-512.html",thongtinthem:""}],player=new Howl({src:[songs[currentSongIndex].src],html5:!0,onend:function(){nextSong(),updateSongInfo()}});openPlayerBtn.addEventListener("click",openPlayer),closeButton.addEventListener("click",closePlayer),prevButton.addEventListener("click",prevSong),playButton.addEventListener("click",togglePlay),nextButton.addEventListener("click",nextSong);let isFirstOpen=!0;function openPlayer(){playerModal.classList.add("is-active"),playerModal.classList.add("fadeInSlow"),isFirstOpen&&(updateSongInfo(),slowVolumeUp(),isFirstOpen=!1),player.pause()&&(playSong(),playIcon.className="fas fa-pause")}function togglePlay(){player.playing()?(player.pause(),playIcon.className="fas fa-play"):(playSong(),playIcon.className="fas fa-pause")}function loadSong(e){currentSongIndex=e,player.stop(),player=new Howl({src:[songs[currentSongIndex].src],html5:!0,volume:currentVolume,onend:function(){nextSong()}}),updateSongInfo(),playSong(),playIcon.className="fas fa-pause"}function prevSong(){loadSong((currentSongIndex-1+songs.length)%songs.length)}function nextSong(){loadSong((currentSongIndex+1)%songs.length)}function skip10SecondsForward(){skipSeconds(10)}function skip10SecondsBackward(){skipSeconds(-10)}function skipSeconds(e){const n=player.seek()+e;player.seek(n),updateSongProgressBar()}function updateSongInfo(){const e=songs[currentSongIndex];songTitle.innerHTML=`${e.title}`,songComposer.innerHTML=`${e.composer}`,songPerformer.innerHTML=`${e.performer}`,sourceButton.href=`${e.nguon}`}function closePlayer(){playerModal.classList.remove("is-active")}skipForwardButton.addEventListener("click",skip10SecondsForward),skipBackwardButton.addEventListener("click",skip10SecondsBackward);let currentVolume=.3;function setVolume(e){player.volume(e),volumeSlider.value=100*e,currentVolume=e}function handleVolumeInput(){setVolume(parseFloat(volumeSlider.value)/100)}function handleVolumeWheel(e){e.preventDefault();const n=Math.max(-1,Math.min(1,e.deltaY||-e.detail));setVolume(Math.max(0,Math.min(1,currentVolume-.05*Math.sign(n))))}function slowVolumeUp(){const e=(.7-currentVolume)/90,n=setInterval((()=>{currentVolume+=e,currentVolume=Math.min(1,currentVolume),setVolume(currentVolume),currentVolume>=.7&&clearInterval(n)}),10)}function updateSongProgressBar(){const e=player.seek(),n=player.duration(),t=e/n*100;progressBar.style.width=t+"%",timer.textContent=`${formatTime(e)} / ${formatTime(n)}`}function playSong(){player.play(),updateSongProgressBar();const e=setInterval((()=>{updateSongProgressBar(),player.playing()||clearInterval(e)}),1e3)}function formatTime(e){const n=Math.floor(e/60),t=Math.floor(e%60);return`${n}:${t<10?"0":""}${t}`}volumeSlider.addEventListener("input",handleVolumeInput),volumeSlider.addEventListener("wheel",handleVolumeWheel),player.on("play",(()=>{requestAnimationFrame(updateSongProgressBar)})),document.getElementById("openChangelog").addEventListener("click",(function(){document.getElementById("changelogModal").classList.add("is-active")})),document.getElementById("closeChangelog").addEventListener("click",(function(){document.getElementById("changelogModal").classList.remove("is-active")}));